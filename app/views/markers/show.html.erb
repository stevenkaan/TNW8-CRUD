
<script>

var myCenter = new google.maps.LatLng(<% if @marker.marker_lat.to_s!='' %><%= @marker.marker_lat %>,<%= @marker.marker_lng %><% else %>52.3779046344369,4.897584915161133<% end %>);
var marker;

function initialize() {

  var mapOptions = {
    center:myCenter,
    zoom:15,
    mapTypeId:google.maps.MapTypeId.ROADMAP
  };

  var map = new google.maps.Map(document.getElementById("googleMap"),mapOptions);
  var marker = new google.maps.Marker({
    position:myCenter,
    map: map,
    title: 'Hello World!',
    draggable:true
  });

  google.maps.event.addListener(marker, 'dragend', function (event) {
    document.getElementById("marker_marker_lat").value = this.getPosition().lat();
    document.getElementById("marker_marker_lng").value = this.getPosition().lng();

  });
}

google.maps.event.addDomListener(window, 'load', initialize);

$(function() {
    $( "#tabs" ).tabs();
  });

</script>
<div class="container content">
<div class="col xl8 l8 m8 s8">
  <h2><%= @marker_info_array[0].name %></h2>
  
<div id="tabs">
  </div>
  <%= form_for :marker, :html => {:class => 'marker_info'}, url: marker_path(@marker), method: :patch do |f| %>
  <p>
    <%= f.submit "Opslaan" %><%= link_to 'Marker verwijderen', marker_path(@marker), method: :delete, data: { confirm: 'Weet je het zeker?' }, :class => 'deleteButton' %>
  </p>
  <% if @marker.errors.any? %>
    <div id="error_explanation">
      <h2>
        <%= pluralize(@marker.errors.count, "error") %> prohibited
        this article from being saved:
      </h2>
      <ul>
        <% @marker.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
    <p>marker type
    <%= f.select(:marker_type, [['Musea','0'],['Monument','1'],['Markt','2'],['Park','3'],['Dierentuin','4'],['Uitzichtpunt','5'],['Winkelstraat','6'],['Restaurant','7'],['Night life','8'],['Casino','9'],['Rondvaart','10'],['Bus tour','11'],['Ziekenhuis','12'],['Apotheken','13'],['Openbare toilet ','14'],['Pinautomaat','15'],['Parkeerplaats','16'],['Toeristeninformatie','17'],['Luchthaven','18'],['Trein station','19'],['Metro station','20'],['Tram halte','21'],['Bushalte','22'],['Veerboot','23'],['Openbaar vervoer','24']], { :class => 'my_style_class' }) %>
  </p>
  <div class="tabs">
  <p class='tab-nld active'>Nederlands</p>
  <p class='tab-eng'>Engels</p>
  <p class='tab-esp'>Spaans</p>
  <div class='clear'></div>
  <div class='tabs-content'>
  <div class='info-nld' style='display:block;'>
  <%= f.label :marker_info_name_nld, 'Naam marker nederlands' %><br>
  <%= f.text_field :marker_info_name_nld, value: @marker_info_array[0].name %><br>
  <%= f.label :marker_info_text_nld, 'Informatie marker nederlands' %><br>
  <%= f.text_area :marker_info_text_nld, value: @marker_info_array[0].body %><br>
  
  <% if @marker_info_array[0].marker_audio.length > 0 %>
    <audio controls="controls">
      <source src="<%= @marker_info_array[0].marker_audio %>" type="audio/mpeg">
    </audio>
    <span class='file_input_style'>Audio fragment wijzigen
      <%= f.file_field :marker_info_audio_nld, :class => 'file_input' %>
    </span><br>

      <%= link_to "Audio verwijderen", {:controller => :markers, :action => :deleteMarkerAudioNld}, :class => "file_input_style" %>

  <% else %>
  <span class='file_input_style'>Audio fragment toevoegen
    <%= f.file_field :marker_info_audio_nld, :class => 'file_input' %>
  </span>
  <% end %>
</div>
<div class='info-eng' style='display:none;'>
  <%= f.label :marker_info_name_eng, 'Naam marker engels' %><br>
  <%= f.text_field :marker_info_name_eng, value: @marker_info_array[1].name %><br>
  <%= f.label :marker_info_text_eng, 'Informatie marker engels' %><br>
  <%= f.text_area :marker_info_text_eng, value: @marker_info_array[1].body %><br>
  <% if @marker_info_array[1].marker_audio.length > 0 %>
    
    <audio controls="controls">
      <source src="<%= @marker_info_array[1].marker_audio %>" type="audio/mpeg">
    </audio>
    <span class='file_input_style'>Audio fragment wijzigen
      <%= f.file_field :marker_info_audio_eng, :class => 'file_input' %>
    </span><br>

    <%= link_to "Audio verwijderen", {:controller => :markers, :action => :deleteMarkerAudioEng}, :class => "file_input_style" %>

  <% else %>
    <span class='file_input_style'>Audio fragment toevoegen
      <%= f.file_field :marker_info_audio_eng, :class => 'file_input' %>
    </span>
  <% end %>
</div>
<div class='info-esp' style='display:none;'>
  <%= f.label :marker_info_name_esp, 'Naam marker spaans' %><br>
  <%= f.text_field :marker_info_name_esp, value: @marker_info_array[2].name %><br>
  <%= f.label :marker_info_text_esp, 'Informatie marker spaans' %><br>
  <%= f.text_area :marker_info_text_esp, value: @marker_info_array[2].body %><br>
  <% if @marker_info_array[2].marker_audio.length > 0 %>
    <audio controls="controls">
      <source src="<%= @marker_info_array[2].marker_audio %>" type="audio/mpeg">
    </audio>
    <span class='file_input_style'>Audio fragment wijzigen
      <%= f.file_field :marker_info_audio_esp, :class => 'file_input' %>
    </span><br>

    <%= link_to "Audio verwijderen", {:controller => :markers, :action => :deleteMarkerAudioEsp}, :class => "file_input_style" %>

  <% else %>
    <span class='file_input_style'>Audio fragment toevoegen
      <%= f.file_field :marker_info_audio_esp, :class => 'file_input' %>
    </span>
  <% end %>
</div>
</div>
</div>


  <p>
    <%= f.hidden_field :marker_lng %>
  </p>
   <p>
    <%= f.hidden_field :marker_lat %>
  </p>

<br>

</div>
  <div class="col xl3 l3 m3 s3">
    <br>
<div id="googleMap"  style="width:100%;height:300px;"></div>
<br>

  <% if @marker.marker_images.url.to_s!='' %>
    <%= link_to "Afbeelding verwijderen", :controller => :markers, :action => :deleteMarkerImage %>
    <%= image_tag (@marker.marker_images.url.to_s),width: '100%' %>
  <% else %>
    <% if @marker.marker_images.url.to_s=='' %>
      <p>
        <div class="upload">Afbeelding toevoegen 1
          <%= f.file_field :marker_images %>
        </div>
      </p>
    <% end %>
  <% end %>

  <% if @marker.marker_images_2.url.to_s!='' %>
    <%= link_to "Afbeelding verwijderen", :controller => :markers, :action => :deleteMarkerImage2 %>
    <%= image_tag (@marker.marker_images_2.url.to_s),width: '100%' %>
  <% else %>
    <% if @marker.marker_images_2.url.to_s=='' %>
      <p>
        <div class="upload">Afbeelding toevoegen 2
          <%= f.file_field :marker_images_2 %>
        </div>
      </p>
    <% end %>
  <% end %>

  <% if @marker.marker_images_3.url.to_s!='' %>
    <%= link_to "Afbeelding verwijderen", :controller => :markers, :action => :deleteMarkerImage3 %>
    <%= image_tag (@marker.marker_images_3.url.to_s),width: '100%' %>
  <% else %>
    <% if @marker.marker_images_3.url.to_s=='' %>
      <p>
        <div class="upload">Afbeelding toevoegen 3
          <%= f.file_field :marker_images_3 %>
        </div>
      </p>
    <% end %>
  <% end %>

  <% if @marker.marker_images_4.url.to_s!='' %>
    <%= link_to "Afbeelding verwijderen", :controller => :markers, :action => :deleteMarkerImage4 %>
    <%= image_tag (@marker.marker_images_4.url.to_s),width: '100%' %>
  <% else %>
    <% if @marker.marker_images_4.url.to_s=='' %>
      <p>
        <div class="upload">Afbeelding toevoegen 4
          <%= f.file_field :marker_images_4 %>
        </div>
      </p>
    <% end %>
  <% end %>

<% end %>
  
</div>
<div class="clear"></div>
</div>

<script type="text/javascript">

$(document).on('change','#marker_marker_info_audio_nld' , function(){ 
  $( ".marker_info" ).submit();
});

$(document).on('change','#marker_marker_info_audio_eng' , function(){ 
  $( ".marker_info" ).submit();
});

$(document).on('change','#marker_marker_info_audio_esp' , function(){ 
  $( ".marker_info" ).submit();
});

$(document).on('change','#marker_marker_images' , function(){ 
  $( ".marker_info" ).submit();
});
$(document).on('change','#marker_marker_images_2' , function(){ 
  $( ".marker_info" ).submit();
});
$(document).on('change','#marker_marker_images_3' , function(){ 
  $( ".marker_info" ).submit();
});
$(document).on('change','#marker_marker_images_4' , function(){ 
  $( ".marker_info" ).submit();
});

$('.tab-nld').click(function(){
  $('.info-nld').css({'display':'block'});
  $('.tab-nld').addClass( "active" );
  $('.info-eng').css({'display':'none'});
  $('.tab-eng').removeClass( "active" );
  $('.info-esp').css({'display':'none'});
  $('.tab-esp').removeClass( "active" );
});

$('.tab-eng').click(function(){
  $('.info-eng').css({'display':'block'});
  $('.tab-eng').addClass( "active" );
  $('.info-nld').css({'display':'none'});
  $('.tab-nld').removeClass( "active" );
  $('.info-esp').css({'display':'none'});
  $('.tab-esp').removeClass( "active" );
});

$('.tab-esp').click(function(){
  $('.info-esp').css({'display':'block'});
  $('.tab-esp').addClass( "active" );
  $('.info-eng').css({'display':'none'});
  $('.tab-eng').removeClass( "active" );
  $('.info-nld').css({'display':'none'});
  $('.tab-nld').removeClass( "active" );
});

</script>
